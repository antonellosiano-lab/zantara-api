 ðŸ§  ZANTARA DEV RULES

> Versione 1.0 â€“ Linee guida ufficiali per lo sviluppo nel progetto `zantara-api`

---

## âœ… 1. Sintassi obbligatoria
- Usa **`async/await`** per tutte le operazioni asincrone
- Evita `.then()` e callback tradizionali

---

## ðŸ“Š 2. Logging strutturato
- Tutti i log devono usare **formato JSON**, es:
  ```js
  console.log(JSON.stringify({
    timestamp: new Date().toISOString(),
    route: "/api/zantara",
    action: "newPrompt",
    status: 200,
    userIP: req.headers["x-forwarded-for"]
  }));
  ```

---

## ðŸ” 3. OpenAI API
- Non esporre mai la chiave completa
- Verifica sempre che `process.env.OPENAI_API_KEY` sia presente
- In caso contrario, ritorna errore chiaro:
  ```js
  return res.status(500).json({ error: "Chiave OpenAI mancante" });
  ```

---

## ðŸ§ª 4. Testing con Vitest
- Scrivi test unitari per ogni funzione rilevante
- Usa framework `Vitest` per semplicitÃ  e velocitÃ 

---

## ðŸ”— 5. Integrazione con Make.com
- Parsare e validare sempre i payload ricevuti
- Risposte standardizzate con:
  - `status`
  - `summary`
  - `nextStep` (facoltativo)

---

## ðŸ§± 6. Organizzazione codice
- Separare: `handlers/`, `helpers/`, `constants/`
- Mantenere `zantara.js` snello: solo routing e orchestrazione

---

## ðŸ—£ï¸ 7. Lingua
- Tutti i commenti e nomi di funzione devono essere in **italiano tecnico**
- Esempi: `verificaChiaveOpenAI()`, `analizzaTask()`, `loggaRichiestaUtente()`

---

## ðŸš« 8. Utenti da ignorare
- Ignorare input provenienti da â€œRuslantaraâ€ o â€œDeantoâ€
- In tal caso: loggare il nome e rispondere con rifiuto educato

---

## âœ¨ 9. Output
- Le risposte JSON devono sempre contenere almeno:
  - `success: true/false`
  - `data` o `error`
- Evitare risposte verbose, a meno che non sia richiesto

---

## ðŸŒ Environment Variables

| Variable          | Description                                                                 |
|-------------------|-----------------------------------------------------------------------------|
| `OPENAI_API_KEY`  | Secret key for accessing the OpenAI API. Must be defined in your environment |
| `MAKE_API_TOKEN`  | Token for authenticating requests to Make.com. Must be defined in your environment |

---

> Documento redatto per garantire coerenza, efficienza e intelligenza nello sviluppo AI-centric di ZANTARA.
